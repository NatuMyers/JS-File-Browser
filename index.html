<!DOCTYPE html>
<html>

	<head>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

		<!-- this is how we connecting to the api's "files" -->
		<script src="http://storage.googleapis.com/el-static/test/filedata.js"></script>
		<script src="/js/fbrowse.js"></script>

		<meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />

    <title>File Viewer</title>

    <link rel="shortcut icon" href="/static/img/favicon.ico"></link>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/materialize.min.css" media="screen" title="no title">
		<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Julius+Sans+One">

    <!-- load order is extremely important -->
    <!-- jquery THEN materialize THEN custom -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="/static/js/materialize.min.js"></script>
    <script src="/static/js/custom.js"></script>
	</head>

	<body onload="displayMyVar('target');" class="grey lighten-4">

		<div class="container">




			<span id="target"></span>
			<pre></pre>

			<div class="row">


		<script type="text/javascript">

		var payload = "/"


			filedata.getFilesForPath("payload", function(err, files) {

				// loop through all the files in the directory
				var markup = "<table cellpadding=\"0\" cellspacing=\"0\"><tbody><tr>";
				var numberOfFiles = files.length;
				for (var i = 0; i < numberOfFiles; i++) {

					// This uses escape quotes: http://stackoverflow.com/questions/2004168/escape-quotes-in-javascript
					// and a multiline strings: http://stackoverflow.com/questions/805107/creating-multiline-strings-in-javascript
					// to build something like this: http://jsfiddle.net/wmkNe/1/

					if (files[i].isFolder) {
							markup = markup + " \
							 <div class=\"col s12 m64 l4\"> \
						      <div class=\"card shake hoverable light-blue darken-4 \"> \
						        <div class=\"card-image\"> \
						          <img  src=\"/static/images/folder.png\" width= \"30px\"> \
						        </div> \
						        <div class=\"card-content center truncate\"> \
						          <a class=\"card-title hoverable btn center yellow darken-2 waves-effect waves-light\" style=\"font-family:  'Julius Sans One', regular; font-size:160%;\">"  + files[i].name +  "</a> \
						        </div> \
						      </div> \
						    </div>"
							} else {
								markup = markup + " \
								 <div class=\"col s12 m64 l4\"> \
							      <div class=\"card shake hoverable light-green darken-3 \"> \
							        <div class=\"card-image\"> \
							          <img  src=\"/static/images/file.png\" width= \"30px\"> \
							        </div> \
							        <div class=\"card-content center\"> \
							          <a class=\"card-title hoverable btn center  teal darken-2  waves-effect waves-light\" style=\"font-family:  'Julius Sans One', regular; font-size:160%;\">"  + files[i].name +  "</a> \
							        </div> \
							      </div> \
							    </div>"
							}
					}

					if (i/3 == 0) {
						var markup = markup + "<br>"
					}

					document.write(markup);
					console.log("Error: ", err);
					console.log("Files: ", files); // files is an array of our...FILES! (like typing ls)
			});
		</script>

		<script type="text/javascript">
		// this is placed here because the DOM has to load 1st... http://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element
		document.getElementById("currentFileName_output").innerHTML = "i";
		</script>


		</div>
	</body>

</html>
